module.exports = function(app) {
  const InformacionLlamada = require('../modelo/InformacionLlamada.js');
  const ControladorRobot = require ('../RobotRPA/controladorRobot');
  const ControladorGoogleCloud = require("../GoogleCloud/GoogleCloudController")
/* GET home page. */
let respuesta = {
  error: false,
  codigo: 200,
  mensaje: ''
 };
app.post('/transcripcion', function (req, res) {
  //var infoLlamada=new InformacionLlamada(req.body);
  if(!req.body.id || !req.body.texto) {
    respuesta.error=true;
    respuesta.codigo=502;
    respuesta.mensaje="Ocurrio un error";
  } else {
    respuesta.error= false;
    respuesta.codigo= 200;
    respuesta.mensaje="respuesta del usuario";
    console.log(process.env);
    base64 = "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"
    ControladorGoogleCloud(base64).catch(console.error);
    //infoLlamada.save();
    //robot = new ControladorRobot(1);
    //robot.enviarAlRobot(infoLlamada);
  }
  console.log(respuesta);
    res.send(JSON.stringify(respuesta));
});
app.get('/transcripciones', function(req, res) {
    InformacionLlamada.find({})
        .exec(function(err, transcripciones) {
            if(err) {
                res.send('err')
            } else {
                res.json(transcripciones);
            }
        });
});
};
